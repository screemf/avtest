{"name": "test_delete_post[Ostap-000olkji-False]", "status": "failed", "statusDetails": {"message": "AssertionError: Ожидалась ошибка для Ostap СотрудинкFalse, но получен статус: 200\nassert 200 in [403, 404, 500]\n +  where 200 = <Response [200]>.status_code", "trace": "username = 'Ostap', password = '000olkji', staff = False\n\n    @pytest.mark.parametrize(\n        \"username, password, staff\",\n        [\n            (\"admin\", \"000p;lko\", True),#Админ,Автор\n            (\"test_no_avtor\", \"000p;lko\", False),#Не автор, нет прав на удаление\n            (\"Ostap\", \"000olkji\", False),#Не админ, Автор, нет  прав на создание\n        ]\n    )\n    @allure.epic(\"Посты\")\n    @allure.feature('API: Удаление поста ')\n    def test_delete_post(username, password,staff):\n        post_id=get_max_post_id()\n        result = get_csrf_token_delete(username, password, post_id)\n        csrf_token = result['csrfmiddlewaretoken']\n        cookies = result['cookies']\n    \n        session = requests.Session()\n        session.cookies.update(cookies)\n        session.cookies.set('csrftoken', csrf_token)\n    \n        data = {\n                'csrfmiddlewaretoken': csrf_token,\n            }\n    \n        headers = {\n                'Accept': 'application/x-www-form-urlencoded',\n                'User-Agent': 'Mozilla/5.0 ...',\n                'X-CSRFToken': csrf_token,\n            }\n    \n        with allure.step(f\"Удаление поста от {username}.Сотрудинк {staff}\"):\n                response = session.post(\n                    f\"{BASE_URL}/blog/post/{post_id}/delete\",\n                    headers=headers,\n                    data=data,\n                )\n    \n                allure.attach(str(response.status_code), name=\"Код ответа\")\n                allure.attach(response.text, name=\"Ответ сервера\")\n    \n                if staff:\n                    if response.status_code == 500:\n                        pytest.fail(f\"Ошибка сервера (500): {response.text}\")\n                    assert response.status_code in [200, 302], (\n                        f\"Удаление поста от  {username} Сотрудник {staff} не удалось, статус: {response.status_code}\"\n                    )\n                else:\n>                   assert response.status_code in [403, 404, 500], (\n                        f\"Ожидалась ошибка для {username} Сотрудинк{staff}, но получен статус: {response.status_code}\"\n                    )\nE                   AssertionError: Ожидалась ошибка для Ostap СотрудинкFalse, но получен статус: 200\nE                   assert 200 in [403, 404, 500]\nE                    +  where 200 = <Response [200]>.status_code\n\nPost_test.py:568: AssertionError"}, "steps": [{"name": "Удаление поста от Ostap.Сотрудинк False", "status": "failed", "statusDetails": {"message": "AssertionError: Ожидалась ошибка для Ostap СотрудинкFalse, но получен статус: 200\nassert 200 in [403, 404, 500]\n +  where 200 = <Response [200]>.status_code\n", "trace": "  File \"C:\\Users\\scree\\PycharmProjects\\pythonProject_AQA\\Test\\Post_test.py\", line 568, in test_delete_post\n    assert response.status_code in [403, 404, 500], (\n"}, "attachments": [{"name": "Код ответа", "source": "5bab93b0-1165-4f4b-baca-924847f8bdb1-attachment.attach"}, {"name": "Ответ сервера", "source": "5707db3e-a251-45fd-84b7-2698b4778fed-attachment.attach"}], "start": 1750711539777, "stop": 1750711539919}], "parameters": [{"name": "username", "value": "'Ostap'"}, {"name": "password", "value": "'000olkji'"}, {"name": "staff", "value": "False"}], "start": 1750711538257, "stop": 1750711539947, "uuid": "adbdd4e6-2d8e-41b4-beea-b4b9fac70e5b", "historyId": "067b35c5a344f4fc3d747dcd405c4e88", "testCaseId": "c0d9bf9faa4256ad13607595d6547f39", "fullName": "Post_test#test_delete_post", "labels": [{"name": "feature", "value": "API: Удаление поста "}, {"name": "epic", "value": "Посты"}, {"name": "suite", "value": "Post_test"}, {"name": "host", "value": "LAPTOP-AFAHUU77"}, {"name": "thread", "value": "36016-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "Post_test"}]}